<!DOCTYPE html>
<html lang="en"> <!-- required to use D3-->
<html>
<head>

<meta charset="utf-8"> <!-- required to use D3-->

  <title>Line Operator</title>

<!--bootstrap stylesheet -->
<link rel="stylesheet" href="../styles/bootstrap.css">

<link rel="stylesheet" href="../fonts/fonts.css">

<!--Zach's Stylesheet-->
<link rel="stylesheet" href="../styles/manufacturing.css">
<link rel="stylesheet" href="../styles/mobile_styles.css">

<link rel="stylesheet" href="../styles/datatables.css">


<!-- Hover effects -->
<link rel="stylesheet" href="../Hover-master/css/hover-min.css">



    <!--tree-->
<link rel="stylesheet" href="../styles/tree.css">
    <link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/select2/3.5.2/select2.min.css">


<!--D3/bootstrap/jquery scripts-->

<script src="../js/jquery.min.js"></script>
<script src="../js/bootstrap.min.js"></script> <!-- this version of bootstrap is essential to getting the page to run-->


<!-- cloudflare links to navbar icons-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<!-- datatables (controls tables-->
<!-- datatables css/js-->
<!-- each link/script controls a different function for datatables-->
 <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css">
 <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.3.1/css/buttons.bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css">


 <!-- needed for datatables-->
 <script type="text/javascript" charset="utf-8" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
 <script type="text/javascript" charset="utf-8" src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap.min.js"></script>

 <!-- needed for buttons (ALL)-->
 <script type="text/javascript" charset="utf-8" src="https://cdn.datatables.net/buttons/1.3.1/js/dataTables.buttons.min.js"></script>

  <script type="text/javascript" charset="utf-8" src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.bootstrap.min.js"></script>

 <script type="text/javascript" charset="utf-8" src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.flash.min.js"></script>

 <!-- needed for PDF/excel/csv Buttons-->
 <script type="text/javascript" charset="utf-8" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
 <script type="text/javascript" charset="utf-8" src="https:cdn.rawgit.com/bpampuch/pdfmake/0.1.27/build/pdfmake.min.js"></script>

 <!-- needed for print functionality-->
 <script type="text/javascript" charset="utf-8" src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.27/build/vfs_fonts.js"></script>

 <!-- needed for print functionality-->
 <script type="text/javascript" charset="utf-8" src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.html5.min.js"></script>

 <!-- datatables print button-->
 <script type="text/javascript" charset="utf-8" src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.print.min.js"></script>
 <!-- column visibility button-->
 <script type="text/javascript" charset="utf-8" src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.colVis.min.js"></script>

 <script type="text/javascript" charset="utf-8" src="https://cdn.datatables.net/responsive/2.1.1/js/dataTables.responsive.min.js"></script>

<!-- end datables scripts-->



<!-- script tags for tree (3 total)-->
<script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js"></script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/select2/3.5.2/select2.min.js"></script>
<!-- END script tags for tree (3 total)-->


<!--Plotly.js source file-->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<!-- Load c3.css -->
<link href="c3/c3.css" rel="stylesheet">

<!-- Load d3.js (Version 3 - only) and c3.js -->
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="c3/c3.min.js"></script>


<script src='../js/lineModel.js'></script>

  <script>
    $(document).ready(function(){
      $('[data-toggle="tooltip"]').tooltip();
    });
</script>



  <style type="text/css">



.btn-group {
  margin-bottom: 0px;

}

.custom-body {
  margin-top: -25px;
  margin-bottom: -20px;
}


  a: hover {
    color: black;
}


#pop-out-tree {

  height: 90%;

  width: 90%;

}

#pop-out-alerts {

  height: 60%;

  width: 80%;

}

#pop-out-avt {

  display: none;

  height: 900px;

  width: 80%;

  overflow: scroll;

}

td {

font-size: 1em;
}

th {
  font-size: 1em;
}



  </style>

    </head>
    !--controls header at top of page-->
    <!--FOR LATER: add pull left/right visibile sm-md-lg-->
    <header>
      <nav id="header-nav" class="navbar navbar-default">
        <div class="container-fluid">
              <div class="navbar-header">
                <a href="index.html" class="pull-left">
              <div class="watson">
                <img class="watson-img" src="watson.png" style="width:80px;">
              </div><!-- end watson-logo -->
            </a>


          <div class="navbar-brand">
                  <h1>Line Operator</h1>
                </div>


          <!-- controls mobile nav bar-->
            <button id="navbarToggle" type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#collapsable-nav" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </button> <!-- end mobile nav bar-->
          </div><!-- end bee-header (IBM logo) -->


          <!--contains links that will go into mobile navbar-->
          <div id="collapsable-nav" class="collapse navbar-collapse">
                  <ul id="nav-list" class="nav navbar-nav navbar-right">

                    <li id="navTest2Button">
                        <a href="index.html" class="hvr-underline-reveal">
                          <span></span> <br class="hidden-xs">Line Manager</a>
                    </li>
                    <li id="navTest3Button">
                        <a href="Line_Engineer.html" class="hvr-underline-reveal" >
                          <span></span> <br class="hidden-xs"> Line Engineer</a>
                    </li>



                  </ul><!-- end nav list-->
                </div> <!-- end collapsable-nav-->


        </div> <!-- end container-->
      </nav> <!-- end header nav (controls entire navbar)-->
    </header> <!-- end header -->

    <body>

        <!-- COLUMN SIZE CONTAINER FOR CHARTS loko -->
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
          <div class="panel panel-custom kpi-size">
           <div class="panel-heading">Depelletizer</div>
             <div class="panel-body">
               <div id='HeadInOutChart'></div>
               <div id='LiftPumpChart'></div>
               <div id='DrapperBeltChart'></div>

              </div> <!-- END PANEL BODY-->
            </div> <!-- end panel -->
          </div> <!-- end column size class -->


         <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
          <div class="panel panel-custom kpi-size">
           <div class="panel-heading">Pelletizer</div>
             <div class="panel-body">
               <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                 <div id='PelletizerChart'> </div>
               </div>

                 <div id='ElevatorChart'> </div>
                 <div id='Sweep1Chart'> </div>
                 <div id='Sweep2Chart'> </div>



               <script>

               window.onload = function() {

                   var socket = new WebSocket('wss://pcp-iot-3.mybluemix.net/ws/pcp-demo');
                   // Show a connected message when the WebSocket is opened.
                    socket.onopen = function(event) {
                      console.log('connected');
                    };

                    socket.onerror = function(error) {
                      console.log('WebSocket Error: ' + error);
                    };

                    socket.onmessage = function(event) {
                        var dataName;
                        message = event.data;

                        message = JSON.parse(message);
                        console.log(message.DATA_NAME);


                          hicChart.flow({
                            columns: [
                              ['Vibration', message.DATA_VALUE]
                            ]
                          });

                        // if (message.DATA_NAME === "depal-channel-1-lift-pump") {
                        //   DepelletizerChart.load({
                        //     columns: [
                        //         ['Vibration', message.DATA_VALUE]
                        //     ]
                        //   });
                        // } else if (message.C === 'd0b5c2c17281') {
                        //   SCchart.flow({
                        //     columns: [
                        //         ['Vibration', message.T]
                        //     ]
                        //   });
                        // }

                    };
                 }

                 //initalize graphs with this data
                 var data = {
                   columns: [
                    ['Vibration', 0, 0, 0, 0, 0, 0, 0, 0],
                   ]
                 };

                 var hicChart = c3.generate({title: {text: 'Head-In-Out'}, bindto: '#HeadInOutChart', data: data});
                 var lpChart = c3.generate({title: {text: 'Lift Pump'}, bindto: '#LiftPumpChart', data: data});
                 var dbChart = c3.generate({title: {text: 'Drapper Belt'}, bindto: '#DrapperBeltChart', data: data});
                 var eChart = c3.generate({title: {text: 'Elevator'}, bindto: '#ElevatorChart', data: data});
                 var s1Chart = c3.generate({title: {text: 'Sweep 1'}, bindto: '#Sweep1Chart', data: data});
                 var s2Chart = c3.generate({title: {text: 'Sweep 2'}, bindto: '#Sweep2Chart', data: data});

               </script>



            </div> <!-- END PANEL BODY-->
          </div> <!-- end panel -->
        </div> <!-- end column size class -->
